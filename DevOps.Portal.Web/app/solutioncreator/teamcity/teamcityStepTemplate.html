<div>
    <h2>Step 3: Set Teamcity project and build</h2>
    <span>Set name for teamcity build</span>
    <hr/>
    <form name="teamcityForm">
        <div class="form-group">
            <label>Parent Project Name</label>
            <div class="btn-group">
                <label class="btn btn-primary btn-sm" ng-model="vm.model.newParentProject" uib-btn-radio="false">Use existing</label>
                <label class="btn btn-primary btn-sm" ng-model="vm.model.newParentProject" uib-btn-radio="true">Create New</label>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-5" ng-show="vm.model.newParentProject === false">
                <ui-select theme="bootstrap" ng-model="vm.model.teamCityParentProjectId">
                    <ui-select-match placeholder="Select a project">
                        <span ng-bind="$select.selected.name"></span>
                    </ui-select-match>
                    <ui-select-choices repeat="project.Id as project in (vm.projects | filter: $select.search) track by project.id">
                        <span ng-bind="project.name"></span>
                    </ui-select-choices>
                </ui-select>
                <span class="help-block">Choose an existing Parent Project to add the new solution to.</span>
            </div>
            <div class="form-group col-md-5" ng-show="vm.model.newParentProject === true">
                <input class="form-control" name="ParentProjectName" type="text"
                       ng-model="vm.model.teamCityNewParentProjectName"
                       placeholder="New Parent Project name" />
                <span class="help-block">The name of the Parent Project i.e. Accounts Manager</span>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-7" 
                 ng-class="{'has-error has-feedback':teamcityForm.subprojectname.$invalid && !teamcityForm.subprojectname.$pristine}">
                <label>Subproject Name</label>
                <input class="form-control" name="subprojectname" type="text" required
                       ng-model="vm.model.teamCitySubprojectName"
                       placeholder="Subproject name"/>
                <span ng-show="teamcityForm.subprojectname.$invalid && !teamcityForm.subprojectname.$pristine" 
                      class="glyphicon glyphicon-remove form-control-feedback" 
                      aria-hidden="true"></span>
                <span class="help-block">The name of the sub project i.e. Admin Application.</span>
            </div> 
        </div>
        <div class="row">
            <div class="form-group col-md-7">
                <label>Subproject Description</label>
                <input class="form-control" name="SubprojectDescription" type="text"
                       ng-model="vm.model.teamCitySubprojectDescription"
                       placeholder="Subproject description" />
                <span class="help-block">This will be used as the description of the TeamCity Subproject.</span>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-5">
                <label>Build Configuration Template</label>
                <ui-select theme="bootstrap" ng-model="vm.model.teamcityBuildTemplateId">
                    <ui-select-match placeholder="Select a project">
                        <span ng-bind="$select.selected.name"></span>
                    </ui-select-match>
                    <ui-select-choices repeat="template in (vm.buildTemplates | filter: $select.search) track by template.id">
                        <span ng-bind="template.name"></span>
                    </ui-select-choices>
                </ui-select>
                <span class="help-block">Choose a build template to associate with.</span>
            </div>
        </div>
    </form>
    <dp-wizard-footer >
        <a ui-sref="solutioncreator.gitlab" class="btn btn-default">
            <i class="glyphicon glyphicon-chevron-left"></i> Back
        </a>
        <button ng-click="vm.moveToNextStep()" class="btn btn-default" ng-disabled="teamcityForm.$invalid">
            <i class="glyphicon glyphicon-chevron-right"></i> Next: Octopus
        </button>
    </dp-wizard-footer>
</div>